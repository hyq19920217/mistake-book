import{u as S,r as m,a as h,c as B,b as e,w as a,d as t,o as E,e as _,f,t as g,g as L,E as v}from"./index-BMI1Flys.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"login-container"},U={class:"switch-mode"},q={__name:"Login",setup(D){const w=L(),d=S(),n=m(null),u=m(!1),l=m(!0),s=h({username:"",password:""}),b={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]},V=async()=>{if(n.value)try{await n.value.validate(),u.value=!0,l.value?await d.login(s):await d.register(s),v.success(l.value?"登录成功":"注册成功"),w.push("/")}catch(c){v.error(c.message||"操作失败")}finally{u.value=!1}};return(c,o)=>{const p=t("el-input"),i=t("el-form-item"),k=t("el-button"),y=t("el-form"),x=t("el-link"),C=t("el-card");return E(),B("div",R,[e(C,{class:"login-card"},{default:a(()=>[o[3]||(o[3]=_("h2",null,"错题本管理系统",-1)),e(y,{model:s,rules:b,ref_key:"formRef",ref:n},{default:a(()=>[e(i,{prop:"username"},{default:a(()=>[e(p,{modelValue:s.username,"onUpdate:modelValue":o[0]||(o[0]=r=>s.username=r),placeholder:"用户名"},null,8,["modelValue"])]),_:1}),e(i,{prop:"password"},{default:a(()=>[e(p,{modelValue:s.password,"onUpdate:modelValue":o[1]||(o[1]=r=>s.password=r),type:"password",placeholder:"密码"},null,8,["modelValue"])]),_:1}),e(i,null,{default:a(()=>[e(k,{type:"primary",onClick:V,loading:u.value,block:""},{default:a(()=>[f(g(l.value?"登录":"注册"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),_("div",U,[e(x,{onClick:o[2]||(o[2]=r=>l.value=!l.value)},{default:a(()=>[f(g(l.value?"没有账号？立即注册":"已有账号？立即登录"),1)]),_:1})])]),_:1})])}}},T=N(q,[["__scopeId","data-v-2aef10b4"]]);export{T as default};
